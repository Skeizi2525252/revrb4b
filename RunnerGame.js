import{r as n,a as T,j as e,b as E}from"./index.js";import{T as O,B as $}from"./BottomMenu.js";function D(){const[u,N]=n.useState(!1),[c,v]=n.useState(!1),[o,h]=n.useState(0),[d,x]=n.useState(1),[S,p]=n.useState([]),[k,f]=n.useState([]),[m,g]=n.useState(0),[M,R]=n.useState([{x:20,y:10,speed:.5},{x:60,y:20,speed:.3},{x:90,y:15,speed:.4}]),z=n.useRef(null),C=n.useRef(null),{user:i,balance:A,updateBalance:I}=T(),b=()=>{const t=new Audio("./click.mp3");t.volume=.3,t.play().catch(()=>{})},w=()=>{b(),v(!1),h(0),x(1),p([]),f([]),g(5);const t=new Audio("./sex.mp3");t.volume=.5,t.play().catch(()=>{}),C.current=t;let a=5;const s=setInterval(()=>{a--,g(a),a===0&&(clearInterval(s),N(!0),g(0))},1e3)};n.useEffect(()=>{if(!u||c||m>0)return;const t=setInterval(()=>{h(a=>a+1),R(a=>a.map(s=>({...s,x:s.x-s.speed<-20?120:s.x-s.speed}))),p(a=>{const s=a.map(l=>({...l,x:l.x-5})).filter(l=>l.x>-10),r=s[s.length-1],j=!r||r.x<70;if(Math.random()<.02&&j){const l=Math.random()<.5?"üéÅ":"üß©",G=l==="üéÅ"?1:0;s.push({x:100,y:G,type:l,id:Date.now()})}return s}),f(a=>{const s=a.map(l=>({...l,x:l.x-5})).filter(l=>l.x>-10),r=s[s.length-1],j=!r||r.x<80;return Math.random()<.01&&j&&s.push({x:100,y:Math.random()<.5?0:1,id:Date.now()}),s}),p(a=>(a.some(r=>r.x>10&&r.x<20&&r.y===d)&&v(!0),a)),f(a=>a.filter(s=>s.x>10&&s.x<20&&s.y===d?(h(r=>r+10),b(),!1):!0))},50);return z.current=t,()=>clearInterval(t)},[u,c,d,m]);const y=t=>{!u||c||(b(),t==="jump"?(x(0),setTimeout(()=>x(1),300)):t==="duck"&&(x(2),setTimeout(()=>x(1),300)))};return n.useEffect(()=>{if(c&&o>0){const t=Math.floor(o/10);if(t>0){const a=async()=>{try{await E.post("http://localhost:3000/api/runner/save",{userId:i==null?void 0:i.id,score:o,reward:t}),console.log("Runner game saved:",o,t)}catch(s){console.error("Save game error:",s)}};i!=null&&i.id&&a(),I(t)}}},[c,o,i]),e.jsxs("div",{className:"min-h-screen bg-dark-primary pb-20 pt-20",children:[e.jsx(O,{}),!u&&!c&&m===0&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-secondary rounded-3xl p-6 max-w-sm",children:[e.jsx("h3",{className:"text-white text-2xl font-bold mb-4 text-center",children:"üïµÔ∏è –ü–æ–±–µ–≥ –æ—Ç –ì—Ä–∏–Ω—á–∞"}),e.jsxs("div",{className:"text-gray-300 text-sm space-y-2 mb-6",children:[e.jsx("p",{children:"üéÅ –ü–æ–¥–∞—Ä–∫–∏ - —Ç–∞–ø–Ω–∏ –í–í–ï–†–• —á—Ç–æ–±—ã –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω—É—Ç—å"}),e.jsx("p",{children:"üß© –ò–≥—Ä—É—à–∫–∏ - —Ç–∞–ø–Ω–∏ –í–ù–ò–ó —á—Ç–æ–±—ã –ø—Ä–∏—Å–µ—Å—Ç—å"}),e.jsx("p",{children:"üåü –ó–≤–µ–∑–¥—ã - —Å–æ–±–∏—Ä–∞–π –¥–ª—è –±–æ–Ω—É—Å–æ–≤"}),e.jsx("p",{className:"text-blue-400 mt-4",children:"–ù–∞–≥—Ä–∞–¥–∞: 1‚ùÑÔ∏è –∑–∞ –∫–∞–∂–¥—ã–µ 10 –æ—á–∫–æ–≤"})]}),e.jsx("button",{onClick:w,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-medium",children:"–ù–∞—á–∞—Ç—å"})]})}),m>0&&e.jsx("div",{className:"fixed inset-0 bg-red-600/90 flex items-center justify-center z-50 animate-pulse",children:e.jsx("div",{className:"text-white text-9xl font-bold animate-pulse",children:m})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-secondary rounded-3xl p-6 max-w-sm w-full",children:[e.jsx("h3",{className:"text-red-400 text-2xl font-bold mb-4 text-center",children:"–ì—Ä–∏–Ω—á –ø–æ–π–º–∞–ª!"}),e.jsxs("div",{className:"bg-dark-tertiary rounded-2xl p-4 mb-6",children:[e.jsxs("p",{className:"text-white text-center text-lg mb-2",children:["–û—á–∫–∏: ",o]}),e.jsxs("p",{className:"text-blue-400 text-center",children:["–ù–∞–≥—Ä–∞–¥–∞: ‚ùÑÔ∏è ",Math.floor(o/10)]})]}),e.jsx("button",{onClick:w,className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-medium",children:"–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"bg-dark-secondary rounded-3xl p-4 mb-4",children:e.jsxs("p",{className:"text-white text-center text-xl",children:["–û—á–∫–∏: ",o]})}),e.jsxs("div",{className:"relative h-80 bg-gradient-to-b from-blue-400 via-blue-300 to-blue-200 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"absolute top-6 right-10 w-20 h-20 bg-yellow-400 rounded-full shadow-[0_0_40px_rgba(250,204,21,0.6)]",children:e.jsx("div",{className:"absolute inset-2 bg-yellow-300 rounded-full"})}),M.map((t,a)=>e.jsx("div",{className:"absolute text-4xl opacity-80",style:{left:`${t.x}%`,top:`${t.y}%`},children:"‚òÅÔ∏è"},a)),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-green-800 via-green-700 to-green-600",children:e.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-green-600"})}),e.jsx("div",{className:"absolute transition-all duration-300 z-10",style:{left:"10%",bottom:d===0?"55%":d===1?"32%":"15%",width:"50px",height:"50px"},children:e.jsx("img",{src:"./spr.png",alt:"player",className:"w-full h-full object-contain drop-shadow-lg"})}),S.map(t=>e.jsx("div",{className:"absolute z-5",style:{left:`${t.x}%`,bottom:t.y===0?"55%":"32%",width:"50px",height:"50px"},children:e.jsx("img",{src:"./govn.png",alt:"–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ",className:"w-full h-full object-contain drop-shadow-lg"})},t.id)),k.map(t=>e.jsx("div",{className:"absolute text-2xl z-5 animate-pulse",style:{left:`${t.x}%`,bottom:t.y===0?"55%":"32%"},children:"üåü"},t.id)),e.jsx("div",{className:"absolute right-4 bottom-32 w-24 h-24 animate-bounce",children:e.jsx("img",{src:"./santr.png",alt:"–ì—Ä–∏–Ω—á",className:"w-full h-full object-contain drop-shadow-lg"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsx("button",{onClick:()=>y("jump"),className:"bg-blue-600 hover:bg-blue-700 text-white py-8 rounded-xl font-medium text-lg active:scale-95 transition",children:"‚¨ÜÔ∏è –ü—Ä—ã–∂–æ–∫"}),e.jsx("button",{onClick:()=>y("duck"),className:"bg-orange-600 hover:bg-orange-700 text-white py-8 rounded-xl font-medium text-lg active:scale-95 transition",children:"‚¨áÔ∏è –ü—Ä–∏—Å–µ—Å—Ç—å"})]})]}),e.jsx($,{})]})}export{D as default};
